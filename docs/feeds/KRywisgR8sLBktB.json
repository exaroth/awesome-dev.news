{"id":"KRywisgR8sLBktB","title":"JS/Frontend","displayTitle":"JS/Frontend","url":"","feedLink":"","isQuery":true,"isEmpty":false,"isHidden":false,"itemCount":8,"items":[{"title":"How to Style the New ::search-text and Other Highlight-y Pseudo-Elements","url":"https://css-tricks.com/how-to-style-the-new-search-text-and-other-highlight-pseudo-elements/","date":1769612884,"author":"Daniel Schwarz","guid":425367,"unread":true,"content":"<p><a href=\"https://developer.chrome.com/blog/new-in-chrome-144\" rel=\"noopener\">Chrome 144</a> recently shipped , which is now one of several highlight-related pseudo-elements. This one selects find-in-page text, which is the text that gets highlighted when you do a / + -type search for something on a page and matches are found.</p><p>By default,  matches are yellow while the current target () is orange, but  enables us to change that.</p><p>I‚Äôll admit, I hadn‚Äôt really been following these highlight pseudo-elements. Up until now, I didn‚Äôt even know that there was a name for them, but I‚Äôm glad there is because that makes it easier to round them all up and compare them, which is exactly what I‚Äôm going to do here today, as it‚Äôs not super obvious what they do based on the name of the pseudo-element. I‚Äôll also explain why we‚Äôre able to customize them, and suggest how.</p><h3>The different types of highlight pseudo-elements</h3><figure><table><thead><tr></tr></thead><tbody><tr><td> selects the current target</td></tr><tr><td>Text fragments allow for programmatic highlighting using URL parameters. If you‚Äôre referred to a website by a search engine, it might use text fragments, which is why  is easily confused with .</td></tr><tr><td>Incorrectly spelled words</td><td>Pretty much applies to editable content only</td></tr><tr><td>Pretty much applies to editable content only</td></tr></tbody></table></figure><p>And let‚Äôs not forget about the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/mark\" rel=\"noopener\"></a> HTML element either, which is what I‚Äôm using in the demos below.</p><h3>What should highlight pseudo-elements look like?</h3><p>The question is, if they all (besides ) have default styling, why would we need to select them with pseudo-elements? The reason is accessibility (color contrast, specifically) and usability (emphasis). For example, if the default yellow background of  doesn‚Äôt contrast well enough with the text color, or if it doesn‚Äôt stand out against the background of the container, then you‚Äôll want to change that.</p><p>I‚Äôm sure there are many ways to solve this (I want to hear  in the comments), but the best solution that I‚Äôve come up with uses <a href=\"https://css-tricks.com/css-color-functions/#aa-the-relative-color-syntax\">relative color syntax</a>. I took wrong turns with both  and <code>backdrop-filter: invert(1)</code> before realizing that many CSS properties are off-limits when it comes to highlight pseudo-elements:</p><pre rel=\"CSS\" data-line=\"\"><code markup=\"tt\">body {\n  --background: #38003c;\n  background: var(--background);\n\n  mark,\n  ::selection,\n  ::target-text,\n  ::search-text {\n    /* Match color to background */\n    color: var(--background);\n\n    /* Convert to RGB then subtract channel value from channel maximum (255) */\n    background: rgb(from var(--background) calc(255 - r) calc(255 - g) calc(255 - b));\n  }\n}</code></pre><p>Your browser might not support that yet, so here‚Äôs a video that shows how the highlighted text adapts to background color changes.</p><p>What‚Äôs happening here is that I‚Äôm converting the container‚Äôs background color to RGB format and then subtracting the value of each channel (, , and ) from the maximum channel value of , inverting each channel and the overall color. This color is then set as the background color of the highlighting, ensuring that it stands out no matter what, and thanks to the new <a href=\"https://css-tricks.com/playing-with-codepen-slidevars/\">CodePen slideVars</a>, you can mess around with the demo to see this in action. You might be able to do this with color formats besides RGB, but RGB is the easiest.</p><p>So that covers the usability, but what about the accessibility?</p><p>Well, the highlighting‚Äôs text color is the same as the container‚Äôs background color because we know that it‚Äôs the inverse of the  background color. While this doesn‚Äôt mean that the two colors will have accessible contrast, it seems as though they will most of the time (you should always check color contrast using <a href=\"https://css-tricks.com/color-contrast-accessibility-tools/\">color contrast tools</a>, regardless).</p><p>If you don‚Äôt like the randomness of inverting colors, that‚Äôs understandable. You can totally pick colors and write conditional CSS for them manually instead, but finding accessible colors that stand out against the different backdrops of your design for all of the different types of highlight pseudo-elements, while accounting for alternative viewing modes such as dark mode, is a headache. Besides, I think certain UI elements (e.g., highlights, errors, focus indicators)  be ugly. They  stand out in a brutalist sort of way and feel disconnected from the design‚Äôs color palette. They should demand maximum attention by intentionally not fitting in.</p><p>Keep in mind that the different types of highlight pseudo-elements should be visually distinctive too, for obvious reasons, but also in case two different types overlap each other (e.g., the user selects text currently matched by find-in-page). Therefore, in the amended code snippet below, , , , and  all have slightly different backgrounds.</p><p>I‚Äôve left  unchanged, the  value of  as it was, the  value of  as it was, and the  value of  as it was, so those last three only have two channels inverted instead of all three. They‚Äôre varied in color now (but still look inverted), and with the addition of an alpha value at  ( for ), they also blend into each other so that we can see where each highlight begins and ends:</p><pre rel=\"CSS\" data-line=\"\"><code markup=\"tt\">body {\n  --background: #38003c;\n  background: var(--background);\n\n  mark,\n  ::selection,\n  ::target-text,\n  ::search-text {\n    color: var(--background);\n  }\n\n  mark {\n    /* Invert all channels */\n    background: rgb(from var(--background) calc(255 - r) calc(255 - g) calc(255 - b) / 70%);\n  }\n\n  ::selection {\n    /* Invert all channels but R */\n    background: rgb(from var(--background) r calc(255 - g) calc(255 - b) / 70%);\n  }\n\n  ::target-text {\n    /* Invert all channels but G */\n    background: rgb(from var(--background) calc(255 - r) g calc(255 - b) / 70%);\n  }\n\n  ::search-text {\n    /* Invert all channels but B */\n    background: rgb(from var(--background) calc(255 - r) calc(255 - g) b / 70%);\n    \n    &amp;:current {\n      /* Invert all channels but B, but without transparency */\n      background: rgb(from var(--background) calc(255 - r) calc(255 - g) b / 100%);\n    }\n  }\n}</code></pre><p> and  are excluded from all this because they have their own visual affordances (red underlines and green underlines respectively, typically contrasted against the neutral background of an editable element such as ).</p><p>But , , , and new-to-Chrome ? Well, they can appear anywhere (even on top of each other), so I think it‚Äôs important that they‚Äôre visually distinctive from each other while being accessible at all times. Again though, even fully-inverted colors can be inaccessible. In fact, the inverse of  is , so test, test, test! Although, maybe <a href=\"https://css-tricks.com/exploring-the-css-contrast-color-function-a-second-time/\"></a> could come to the rescue once the <a href=\"https://www.w3.org/TR/css-color-5/#funcdef-contrast-color\" rel=\"noopener\">CSS Color Module Level 5</a> version of it ships.</p><p>In the meantime, , no more highlight-y elements!</p>","contentLength":6441,"flags":null,"enclosureUrl":"https://css-tricks.com/wp-content/uploads/2026/01/highlights.mov","enclosureMime":"","commentsUrl":null},{"title":"ReliCSS","url":"https://css-tricks.com/relicss/","date":1769606700,"author":"Geoff Graham","guid":425461,"unread":true,"content":"<p>We all have a few skeletons in our CSS closets. There‚Äôs probably that one-off  where you can now manage that more effectively with cascade layers. Or maybe a dated Checkbox Hack that  has solved. Perhaps it‚Äôs been a long while since your last site redesign and it‚Äôs chock-full of vendor-prefixed properties from 2012. </p><p>Stu Robson‚Äôs <a href=\"https://www.alwaystwisted.com/relicss/\" rel=\"noopener\">ReliCSS</a> (clever name!) tool can excavate outdated CSS in your codebase that have modern CSS solutions.</p><p>Each relic is assigned a level of severity. As Stu explains it:</p><blockquote><ul><li>&nbsp;True ‚Äúfossils‚Äù. Hacks for (now) unsupported browsers (IE6/7) or ‚Äúdangerous‚Äù techniques. High-risk, obsolete, should be first targets for removal.</li><li>&nbsp;The middle ground. Hacks for older unsupported browsers (IE8-10). They work but they‚Äôre fragile. Hacks to review to see if they‚Äôre still relevant for your actual users.</li><li>&nbsp;Modern artifacts. Usually vendor prefixes (-webkit-, -moz-). Safe mostly, but better handled by automated tools like Autoprefixer. They‚Äôre an opportunity to improve your build process.</li></ul></blockquote><p>It‚Äôs been a little while since my personal site got an overhaul. Not to toot my own horn, but heyyyyyy!</p><p>Seriously, though. I know there are things in there I‚Äôm embarrassed to admit.</p><p>But what if we do archeological dig on CSS-Tricks? I mean, it‚Äôs been <a href=\"https://css-tricks.com/design-v18/\">at  five years</a> since this place has gotten the love it deserves. I‚Äôm almost afraid to look. Here goes‚Ä¶</p><p>OK, not as bad as I imagined. It‚Äôs largely vendor prefixing, which I‚Äôm sure comes courtesy of an older Autoprefixer configuration.</p>","contentLength":1516,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"This Week In React #266: DoS, shadcn, Skills, Rspack, React Aria, TanStack, Remotion, ChartGPU | Expo 55 beta, Hermes, Expo Router, Widgets, CSS, AI, Bootsplash, Detox | TC39, Rolldown, Yarn, Nodde, Mermaid, Unplugin","url":"https://thisweekinreact.com/newsletter/266","date":1769558400,"author":"","guid":425478,"unread":true,"content":"<p>This week, the community continued to publish React-related Agent skills. React RSCs and Next.js are hit by another set of DoS vulnerabilities, and it‚Äôs recommended to upgrade immediately.</p><p>The React Native side is more exciting, with Expo SDK 55 in beta and upcoming support for new CSS features. We now have 2 distinct libraries implementing home screen widgets, and need to understand the trade-offs of each approach.</p><p>As always, thanks for supporting us on your favorite platform:</p><p>Stop treating i18n as a deployment bottlenecküõë  automates your React localization workflow. Sync content to Crowdin, translate with AI and human proofreaders, and auto-sync the translations back to your git.</p><ul><li> Connect directly to GitHub/GitLab repo. Localization becomes a simple, continuous part of your CI/CD pipeline.</li><li> Our open-source CLI uses Agentic AI to scan your JSX. It automatically provides translators with the exact UI context for every string.</li><li><strong>Over-The-Air (OTA) Updates:</strong> Fix a typo in real-time. With OTA SDK, you can push updates to your React Native app instantly. No rebuilds or App Store reviews required.‚ö°</li></ul><p><strong>Focus on your components. Crowdin handles the translation.</strong> üöÄ</p><p>Stop context switching between your code editor and native IDEs. Radon helps you write cleaner code, catch errors instantly, and focus on what matters most ‚Äî building great apps.</p><p><strong>Why developers are choosing Radon:</strong></p><ul><li> Radon runs iOS Simulator and Android emulator directly in your VS Code or Cursor project.</li><li> You can jump directly from preview to a file where your React Native component is defined. It can't really get simpler than that.</li><li><strong>‚èØÔ∏è Instant Replays (PRO):</strong> Missed a bug during a manual test? Rewatch the last 30 seconds of device interaction.</li><li> your coding assistant with the latest React Native knowledge.</li></ul><p>It's been longer than usual since the last SDK, so this new SDK 55 looks like a significant update. The stable version will be released in about two weeks; until then, you can already check the beta release notes with a long list of highlights:</p><ul><li>React 19.2, unlocking , </li><li>React Native 0.83.1, unlocking DOM Node APIs, new DevTools features, Intersection Observers (experimental)</li><li>New Architecture only, Legacy Architecture removed</li><li>Revamped project template, using native Tabs by default</li><li>Hermes v1 opt-in flag, for performance improvements (but slower native build times)</li><li>Hermes bytecode diffing opt-in flag, for ~75% smaller incremental OTA updates</li><li>AI tooling, MCP server, Agent skills</li><li>Expo Router 7 beta with more native features (<a href=\"https://x.com/Baconbrix/status/2014480349066305953\" target=\"_blank\" rel=\"noopener noreferrer\">preview tweet</a>) and web SSR (alpha)</li><li>Expo brownfield integration to existing native apps</li><li>Expo UI improvements, support for Jetpack Compose coming</li><li>Expo Widgets alpha for iOS home screen widgets and Live Activities</li></ul>","contentLength":2710,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"What's next for JavaScript frameworks in 2026","url":"https://javascriptweekly.com/issues/770","date":1769472000,"author":"","guid":424002,"unread":true,"content":"<li><p><a href=\"https://javascriptweekly.com/link/179795/rss\">Storybook 10.2</a> ‚Äì The frontend workshop for building UI components gets some UI and story authoring&nbsp;improvements.</p></li><li><p>üé• <a href=\"https://javascriptweekly.com/link/179815/rss\">Mediabunny 1.31.0</a> ‚Äì Media toolkit for reading, writing, and converting video and audio files, directly in the&nbsp;browser.</p></li><li><p><a href=\"https://javascriptweekly.com/link/179819/rss\">Cheerio v1.2</a> ‚Äì Fast, flexible HTML and XML parser and DOM manipulation&nbsp;library.</p></li><li><p><a href=\"https://javascriptweekly.com/link/179822/rss\">Feedsmith 2.9</a> ‚Äì Feed parser and generator for popular feed&nbsp;formats.</p></li>","contentLength":393,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"There is No Need to Trap Focus on a Dialog Element","url":"https://css-tricks.com/there-is-no-need-to-trap-focus-on-a-dialog-element/","date":1769439747,"author":"Zell Liew","guid":421545,"unread":true,"content":"<p>I was building a  component that uses the  element‚Äôs  method. While testing the component, I discovered I could tab out of the  (in modal mode) and onto the address bar.</p><p>And I was surprised ‚Äî accessibility advice around modals have commonly taught us to trap focus within the modal. So this seems wrong to me.</p><p>Upon further <a href=\"https://github.com/whatwg/html/issues/8339\" rel=\"noopener\">research</a>, it seems like we no longer need to trap focus within the  (even in modal mode). So, the focus-trapping is deprecated advice if you use .</p><p>Instead of asking you to read through the entire <a href=\"https://github.com/whatwg/html/issues/8339\" rel=\"noopener\">GitHub Issue</a> detailing the discussion, I summarized a couple of key points from notable people below.</p><p>Here are some <a href=\"https://github.com/whatwg/html/issues/8339#issuecomment-1263470105\" rel=\"noopener\">comments</a> from Scott O‚ÄôHara that tells us about the history and context of the focus-trapping advice:</p><blockquote><p>WCAG is  normatively stating focus must be trapped within a dialog. Rather, the normative WCAG spec makes zero mention of requirements for focus behavior in a dialog.</p><p>The informative <a href=\"https://www.w3.org/WAI/WCAG21/Understanding/focus-order.html\" rel=\"noopener\">2.4.3 focus order understanding doc</a> talk about limiting focus behavior within a dialog ‚Äì but again, this is in the context of a scripted custom dialog and was written long before  or  were widely available.</p><p>The purpose of the APG is to demonstrate how to use ARIA. And, without using native HTML features like  or , it is far easier to trap focus within the custom dialog than it is to achieve the behavior that the  element has.</p><p>Both the APG modal dialog and the WCAG understanding doc were written long before the  attribute or the  element were widely supported. And, the alternative to instructing developers to trap focus in the dialog would have been to tell them that they needed to ensure that all focusable elements in the web page, outside of the modal dialog, received a .</p></blockquote><p>L√©onie Watson <a href=\"https://github.com/whatwg/html/issues/8339#issuecomment-1758129923\" rel=\"noopener\">weighs in</a> and explains why it‚Äôs okay for a screen-reader user to move focus to the address bar:</p><blockquote><p>In the page context you can choose to  out of the bottom and around the browser chrome, you can use a keyboard command to move straight to the address bar or open a particular menu, you can close the tab, and so on. This gives people a choice about how, why, and what they do to escape out of the context.</p><p>It seems logical (to me at least) for the same options to be available to people when in a dialog context instead of a page context.</p></blockquote><p>Finally, <a href=\"https://github.com/whatwg/html/issues/8339#issuecomment-1822591131\" rel=\"noopener\">Matatk</a> shared the conclusion from the W3C‚Äôs Accessible Platform Architectures (APA) Working Group that okay-ed the notion that ‚Äòs  method doesn‚Äôt need to trap focus.</p><blockquote><p>We addressed this question in the course of several APA meetings and came to the conclusion that the current behavior of the native dialog element should be kept as it is. So, that you can tab from the dialog to the browser functionalities.</p><p>We see especially the benefit that keyboard users can, for example, open a new tab to look something important up or to change a browser setting this way. At the same time, the dialog element thus provides an additional natural escape mechanism (i.e. moving to the address bar) in, for example, kiosk situations where the user cannot use other standard keyboard shortcuts.</p></blockquote><p>From what I‚Äôm reading, it sounds like we don‚Äôt have to worry about focus trapping if we‚Äôre properly using the Dialog API‚Äôs  method!</p><p>Hope this news make it easier for you to build components. üòâ</p>","contentLength":3245,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Community Stories, Code Samples, and Signal Forms!","url":"https://blog.angular.dev/community-stories-code-samples-and-signal-forms-7d0294475610?source=rss----447683c3d9a3---4","date":1769189859,"author":"Angular","guid":419603,"unread":true,"content":"<p>This week, we‚Äôre sharing powerful stories and hands-on code! The Angular community is defined by its willingness to share , provide , and dive deep into major features like .</p><p>Check out these valuable resources from Angular&nbsp;experts:</p><p><strong>Have you integrated Signal Forms or the new Control Flow into your app yet?</strong> Share your experience or a snippet of your&nbsp;code!</p><p> Use  to share your favorite Angular resources.</p><img src=\"https://medium.com/_/stat?event=post.clientViewed&amp;referrerSource=full_rss&amp;postId=7d0294475610\" width=\"1\" height=\"1\" alt=\"\">","contentLength":405,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Responsive Hexagon Grid Using Modern CSS","url":"https://css-tricks.com/responsive-hexagon-grid-using-modern-css/","date":1769179196,"author":"Temani Afif","guid":419493,"unread":true,"content":"<p>Five years ago I published an article on how to create <a href=\"https://css-tricks.com/hexagons-and-beyond-flexible-responsive-grid-patterns-sans-media-queries/\">a responsive grid of hexagon shapes</a>. It was the only technique that didn‚Äôt require media queries or JavaScript. It works with any number of items, allowing you to easily control the size and gap using CSS variables.</p><p>I am using , , setting  equal to , etc. In 2026, this may sound a bit hacky and outdated. Not really since this method works fine and is well supported, but can we do better using modern features? In five years, many things have changed and we can improve the above implementation and make it less hacky!</p><p>The CSS code is shorter and contains fewer <a href=\"https://css-tricks.com/magic-numbers-in-css/\">magic numbers</a> than the last time I approached this. You will also find some complex calculations that we will dissect together.</p><p>Before diving into this new demo, I highly recommend reading <a href=\"https://css-tricks.com/hexagons-and-beyond-flexible-responsive-grid-patterns-sans-media-queries/\">my previous article</a> first. It‚Äôs not mandatory, but it allows you to compare both methods and realize how much (and rapidly) CSS has evolved in the last five years by introducing new features that make one-difficult things like this easier.</p><p>Let‚Äôs start with <a href=\"https://css-tip.com/hexagon/\" rel=\"noopener\">the hexagon shape</a>, which is the main element of our grid. Previously, I had to rely on  to create it:</p><pre rel=\"CSS\" data-line=\"\"><code markup=\"tt\">.hexagon {\n  --s: 100px;\n  width: var(--s);\n  height: calc(var(--s) * 1.1547);\n  clip-path: polygon(0% 25%, 0% 75%, 50% 100%, 100% 75%, 100% 25%, 50% 0%);\n}</code></pre><p>But now, we can rely on the new  property which works alongside the <a href=\"https://css-tricks.com/almanac/properties/b/border-radius/\"></a> property:</p><pre rel=\"CSS\" data-line=\"\"><code markup=\"tt\">.hexagon {\n  width: 100px;\n  aspect-ratio: cos(30deg);\n  border-radius: 50% / 25%;\n  corner-shape: bevel;\n}</code></pre><p>Simpler than how we used to bevel elements, and as a bonus, we can add a border to the shape without workarounds!</p><p>The  property is the first modern feature we are relying on. It makes drawing <a href=\"https://css-tip.com/corner-shape/\" rel=\"noopener\">CSS shapes</a> a lot easier than traditional methods, like using <a href=\"https://css-tricks.com/almanac/properties/c/clip-path/\"></a>. You can still keep using the  method, of course, for better support (and if you don‚Äôt need a border on the element), but here is a <a href=\"https://css-tip.com/hexagon-shape/\" rel=\"noopener\">more modern implementation</a>:</p><pre rel=\"CSS\" data-line=\"\"><code markup=\"tt\">.hexagon {\n  width: 100px;\n  aspect-ratio: cos(30deg);\n  clip-path: polygon(-50% 50%,50% 100%,150% 50%,50% 0);\n}</code></pre><p>There are fewer points inside the polygon, and we replaced the magic number  with an  declaration. I won‚Äôt spend more time on the code of the shapes, but here are two articles I wrote if you want a detailed explanation with more examples:</p><p>Now that we have our shape, let‚Äôs create the grid. It‚Äôs called a ‚Äúgrid,‚Äù but I am going to use a flexbox configuration:</p><pre rel=\"HTML\" data-line=\"\"><code markup=\"tt\">&lt;div class=\"container\"&gt;\n  &lt;div&gt;&lt;/div&gt;\n  &lt;div&gt;&lt;/div&gt;\n  &lt;div&gt;&lt;/div&gt;\n  &lt;div&gt;&lt;/div&gt;\n  &lt;!-- etc. --&gt;\n&lt;/div&gt;</code></pre><pre rel=\"CSS\" data-line=\"\"><code markup=\"tt\">.container {\n  --s: 120px; /* size  */\n  --g: 10px; /* gap */\n  \n  display: flex;\n  gap: var(--g);\n  flex-wrap: wrap;\n}\n.container &gt; * {\n  width: var(--s);\n  aspect-ratio: cos(30deg);\n  border-radius: 50% / 25%;\n  corner-shape: bevel;\n}</code></pre><p>Nothing fancy so far. From there, we add a bottom margin to all items to create an overlap between the rows:</p><pre rel=\"CSS\" data-line=\"\"><code markup=\"tt\">.container &gt; * {\n  margin-bottom: calc(var(--s)/(-4*cos(30deg)));\n}</code></pre><p>The last step is to add a left margin to the first item of the even rows (i.e., 2nd, 4th, 6th, and so). This margin will create the shift between rows to achieve a perfect grid.</p><p>Said like that, it sounds easy, but it‚Äôs the trickiest part where we need complex calculations. The grid is responsive, so the ‚Äúfirst‚Äù item we are looking for can be any item depending, on the container size, item size, gap, etc.</p><p>Let‚Äôs start with a figure:</p><p>Our grid can have two aspects depending on the responsiveness. We can either have the same number of items in all the rows (Grid 1 in the figure above) or a difference of one item between two consecutive rows (Grid 2). The  and  variables represent the number of items in the rows. In Grid 1 we have , and in Grid 2 we have .</p><p>In Grid 1, the items with a left margin are 6, 16, 26, etc., and in Grid 2, they are 7, 18, 29, etc. Let‚Äôs try to identify the logic behind those numbers.</p><p>The first item in both grids (6 or 7) is the first one in the second row, so it‚Äôs the item . The second item (16 or 18) is the first one in the third row, so it‚Äôs the item . The third item (26 or 29) is the item . If you look closely, you can see a pattern that we can express using the following formula:</p><p>‚Ä¶where  is a positive integer (zero excluded). The items we are looking for can be found using the following pseudo-code:</p><pre rel=\"\" data-line=\"\"><code markup=\"tt\">for(i = 0; i&lt; ?? ;i++) {\n  index = N*i + M*(i - 1) + 1\n  Add margin to items[index]  \n}</code></pre><p>We don‚Äôt have loops in CSS, though, so we will have to do something different. We can obtain the index of each item using the new  function. The logic is to test if that index respect the previous formula.</p><pre rel=\"\" data-line=\"\"><code markup=\"tt\">index = N*i + M*(i - 1) + 1</code></pre><p>‚Ä¶let‚Äôs express  using the index:</p><pre rel=\"\" data-line=\"\"><code markup=\"tt\">i = (index - 1 + M)/(N + M)</code></pre><p>We know that  is a positive integer (zero excluded), so for each item, we get its index and test if  is a positive integer. Before that, let‚Äôs calculate the number of items,  and .</p><p>Calculating the number of items per row is the same as calculating how many items can fit in that row.</p><pre rel=\"\" data-line=\"\"><code markup=\"tt\">N = round(down,container_size / item_size);</code></pre><p>Dividing the container size by the item size gives us a number. If we <a href=\"https://css-tricks.com/almanac/functions/r/round/\"></a>` it down to the nearest integer, we get the number of items per row. But we have a gap between items, so we need to account for this in the formula:</p><pre rel=\"\" data-line=\"\"><code markup=\"tt\">N = round(down, (container_size + gap)/ (item_size + gap));</code></pre><p>We do the same for , but this time we need to also account for the left margin applied to the first item of the row:</p><pre rel=\"\" data-line=\"\"><code markup=\"tt\">M = round(down, (container_size + gap - margin_left)/ (item_size + gap));</code></pre><p>Let‚Äôs take a closer look and identify the value of that margin in the next figure:</p><p>It‚Äôs equal to half the size of an item, plus half the gap:</p><pre rel=\"\" data-line=\"\"><code markup=\"tt\">M = round(down, (container_size + gap - (item_size + gap)/2)/(item_size + gap));\n\nM = round(down, (container_size - (item_size - gap)/2)/(item_size + gap));</code></pre><p>The item size and the gap are defined using the  and  variables, but what about the container size? We can rely on container query units and use .</p><p>Let‚Äôs write what we have until now using CSS:</p><pre rel=\"CSS\" data-line=\"\"><code markup=\"tt\">.container {\n  --s: 120px;  /* size  */\n  --g: 10px;   /* gap */\n  \n  container-type: inline-size; /* we make it a container to use 100cqw */\n}\n.container &gt; * {\n  --_n: round(down,(100cqw + var(--g))/(var(--s) + var(--g)));\n  --_m: round(down,(100cqw - (var(--s) - var(--g))/2)/(var(--s) + var(--g))); \n  --_i: calc((sibling-index() - 1 + var(--_m))/(var(--_n) + var(--_m)));\n  \n  margin-left: ???; /* We're getting there! */\n}</code></pre><p>We can use  to test if  is an integer. If it‚Äôs an integer, the result is equal to 0. Otherwise, it‚Äôs equal to a value between 0 and 1.</p><p>We can introduce another variable and use the new  function!</p><pre rel=\"CSS\" data-line=\"\"><code markup=\"tt\">.container {\n  --s: 120px;  /* size  */\n  --g: 10px;   /* gap */\n  \n  container-type: inline-size; /* we make it a container to use 100cqw */\n}\n.container &gt; * {\n  --_n: round(down,(100cqw + var(--g))/(var(--s) + var(--g)));\n  --_m: round(down,(100cqw - (var(--s) - var(--g))/2)/(var(--s) + var(--g))); \n  --_i: calc((sibling-index() - 1 + var(--_m))/(var(--_n) + var(--_m)));\n  --_c: mod(var(--_i),1);\n  margin-left: if(style(--_c: 0) calc((var(--s) + var(--g))/2) else 0;);\n}</code></pre><p>This is a good use case for , but we can do it differently:</p><pre rel=\"CSS\" data-line=\"\"><code markup=\"tt\">--_c: round(down, 1 - mod(var(--_i), 1));</code></pre><p>The <a href=\"https://css-tricks.com/almanac/functions/m/mod/\"></a> function gives us a value between 0 and 1, where 0 is the value we want.  gives us a value between -1 and 0.  gives us a value between 0 and 1, but this time it‚Äôs the 1 we need. We apply  to the calculation, and the result will be either 0 or 1. The  variable is now a Boolean variable that we can use directly within a calculation.</p><pre rel=\"CSS\" data-line=\"\"><code markup=\"tt\">margin-left: calc(var(--_c) * (var(--s) + var(--g))/2);</code></pre><p>If  is equal to 1, we get a margin. Otherwise, the margin is equal to 0. This time you don‚Äôt need to register the variable using . I personally prefer this method as it requires less code, but the  method is also interesting.</p><blockquote><p>Should I remember all those formulas by heart?! It‚Äôs too much!</p></blockquote><p>No, you don‚Äôt. I tried to provide a detailed explanation behind the math, but it‚Äôs not mandatory to understand it to work with the grid. All you have to do is update the variables that control the size and gap. No need to touch the part that set the left margin. We will even explore how the same code structure can work with more shapes!</p><p>The common use case is a hexagon shape but what about other shapes? We can, for example, consider a rhombus and, for this, we simply adjust the code that controls the shape.</p><pre rel=\"CSS\" data-line=\"\"><code markup=\"tt\">.container &gt; * {\n  aspect-ratio: cos(30deg);\n  border-radius: 50% / 25%;\n  corner-shape: bevel;\n  margin-bottom: calc(var(--s)/(-4*cos(30deg)));\n}</code></pre><pre rel=\"CSS\" data-line=\"\"><code markup=\"tt\">.container &gt; * {\n  aspect-ratio: 1;\n  border-radius: 50%;\n  corner-shape: bevel;\n  margin-bottom: calc(var(--s)/-2);\n}</code></pre><p>A responsive grid of rhombus shapes ‚Äî with no effort! Let‚Äôs try an octagon:</p><pre rel=\"CSS\" data-line=\"\"><code markup=\"tt\">.container &gt; * {\n  aspect-ratio: 1;\n  border-radius: calc(100%/(2 + sqrt(2)));\n  corner-shape: bevel;\n  margin-bottom: calc(var(--s)/(-1*(2 + sqrt(2))));\n}</code></pre><p>Almost! For an octagon, we need to adjust the  because we need more horizontal space between the items:</p><pre rel=\"CSS\" data-line=\"\"><code markup=\"tt\">.container {\n  --g: calc(10px + var(--s)/(sqrt(2) + 1));\n  gap: 10px var(--g);\n}</code></pre><p>The variable  includes a portion of the size  and is applied as a row gap, while the column gap is kept the same ().</p><p>From there, we can also get another type of hexagon grid:</p><p>And why not a grid of circles as well? Here we go:</p><p>As you can see, we didn‚Äôt touch the complex calculation that sets the left margin in any of those examples. All we had to do was to play with the  and  properties to control the shape and adjust the bottom margin to rectify the overlap. In some cases, we need to adjust the horizontal gap.</p><p>I will end this article with another demo that will serve as a small homework for you:</p><p>This time, the shift is applied to the odd rows rather than the even ones. I let you dissect the code as a small exercise. Try to identify the change I have made and what‚Äôs the logic behind it ( try to redo the calculation steps using this new configuration.)</p>","contentLength":9882,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null},{"title":"Open Props @custom-media Recipes","url":"https://css-tricks.com/open-props-custom-media-recipes/","date":1769173200,"author":"Geoff Graham","guid":419578,"unread":true,"content":"<p>I often forget the exact name of an  query or simply get tired writing something like <code>@media screen and (prefers-reduced-motion: no-preference)</code> over and over again.  will be a nice bit of relief to the ol‚Äô muscle memory because it allows us to create aliases for queries.</p><pre rel=\"CSS\" data-line=\"\"><code markup=\"tt\">@custom-media --motionOK (prefers-reduced-motion: no-preference);\n\n@media (--motionOK) {\n  /* animations and transitions */\n}</code></pre>","contentLength":398,"flags":null,"enclosureUrl":"","enclosureMime":"","commentsUrl":null}],"tags":["frontend"]}